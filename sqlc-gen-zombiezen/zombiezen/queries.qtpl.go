// Code generated by qtc from "queries.qtpl". DO NOT EDIT.
// See https://github.com/valyala/quicktemplate for details.

//line queries.qtpl:1
package zombiezen

//line queries.qtpl:1
import (
	qtio422016 "io"

	qt422016 "github.com/valyala/quicktemplate"
)

//line queries.qtpl:1
var (
	_ = qtio422016.Copy
	_ = qt422016.AcquireByteBuffer
)

//line queries.qtpl:1
func StreamGenerateQuery(qw422016 *qt422016.Writer, q *GenerateQueryContext) {
//line queries.qtpl:1
	qw422016.N().S(`
// Code generated by "sqlc-gen-zombiezen". DO NOT EDIT.

package `)
//line queries.qtpl:4
	qw422016.E().S(q.PackageName.Lower)
//line queries.qtpl:4
	qw422016.N().S(`

import (
    "fmt"
    "zombiezen.com/go/sqlite"

`)
//line queries.qtpl:10
	if q.HasSliceParams {
//line queries.qtpl:10
		qw422016.N().S(`
    "strings"
`)
//line queries.qtpl:12
	}
//line queries.qtpl:12
	qw422016.N().S(`

`)
//line queries.qtpl:14
	if q.NeedsTimePackage {
//line queries.qtpl:14
		qw422016.N().S(`
    "time"
`)
//line queries.qtpl:16
	}
//line queries.qtpl:16
	qw422016.N().S(`
`)
//line queries.qtpl:17
	if q.NeedsToolbelt {
//line queries.qtpl:17
		qw422016.N().S(`
    "github.com/delaneyj/toolbelt"
`)
//line queries.qtpl:19
	}
//line queries.qtpl:19
	qw422016.N().S(`
)

`)
//line queries.qtpl:22
	if q.HasResponse && !q.ResponseIsSingularField && !q.ResponseHasModel {
//line queries.qtpl:22
		qw422016.N().S(`
type `)
//line queries.qtpl:23
		qw422016.E().S(q.Name.Pascal)
//line queries.qtpl:23
		qw422016.N().S(`Res struct {
`)
//line queries.qtpl:24
		for _, f := range q.ResponseFields {
//line queries.qtpl:24
			qw422016.N().S(`        `)
//line queries.qtpl:25
			qw422016.E().S(f.Name.Pascal)
//line queries.qtpl:25
			qw422016.N().S(` `)
//line queries.qtpl:25
			if f.IsNullable {
//line queries.qtpl:25
				qw422016.N().S(`*`)
//line queries.qtpl:25
			}
//line queries.qtpl:25
			qw422016.E().S(f.GoType.Original)
//line queries.qtpl:25
			qw422016.N().S(` `)
//line queries.qtpl:25
			qw422016.N().S("`")
//line queries.qtpl:25
			qw422016.N().S(`json:"`)
//line queries.qtpl:25
			qw422016.E().S(f.Name.Lower)
//line queries.qtpl:25
			qw422016.N().S(`"`)
//line queries.qtpl:25
			qw422016.N().S("`")
//line queries.qtpl:25
			qw422016.N().S(`
`)
//line queries.qtpl:26
		}
//line queries.qtpl:26
		qw422016.N().S(`}
`)
//line queries.qtpl:28
	}
//line queries.qtpl:28
	qw422016.N().S(`

`)
//line queries.qtpl:30
	if q.HasParams && !q.ParamsIsSingularField {
//line queries.qtpl:30
		qw422016.N().S(`
type `)
//line queries.qtpl:31
		qw422016.E().S(q.Name.Pascal)
//line queries.qtpl:31
		qw422016.N().S(`Params struct {
`)
//line queries.qtpl:32
		for _, f := range q.Params {
//line queries.qtpl:32
			qw422016.N().S(`        `)
//line queries.qtpl:33
			qw422016.E().S(f.Name.Pascal)
//line queries.qtpl:33
			qw422016.N().S(` `)
//line queries.qtpl:33
			if f.IsNullable {
//line queries.qtpl:33
				qw422016.N().S(`*`)
//line queries.qtpl:33
			}
//line queries.qtpl:33
			qw422016.E().S(f.GoType.Original)
//line queries.qtpl:33
			qw422016.N().S(` `)
//line queries.qtpl:33
			qw422016.N().S("`")
//line queries.qtpl:33
			qw422016.N().S(`json:"`)
//line queries.qtpl:33
			qw422016.E().S(f.Name.Lower)
//line queries.qtpl:33
			qw422016.N().S(`"`)
//line queries.qtpl:33
			qw422016.N().S("`")
//line queries.qtpl:33
			qw422016.N().S(`
`)
//line queries.qtpl:34
		}
//line queries.qtpl:34
		qw422016.N().S(`}
`)
//line queries.qtpl:36
	}
//line queries.qtpl:36
	qw422016.N().S(`

type `)
//line queries.qtpl:38
	qw422016.E().S(q.Name.Pascal)
//line queries.qtpl:38
	qw422016.N().S(`Stmt struct {
    conn      *sqlite.Conn
    stmt      *sqlite.Stmt
    querySQL  string
    hasSlices bool
}

func `)
//line queries.qtpl:45
	qw422016.E().S(q.Name.Pascal)
//line queries.qtpl:45
	qw422016.N().S(`(tx *sqlite.Conn) *`)
//line queries.qtpl:45
	qw422016.E().S(q.Name.Pascal)
//line queries.qtpl:45
	qw422016.N().S(`Stmt {
    const querySQL = `)
//line queries.qtpl:45
	qw422016.N().S("`")
//line queries.qtpl:45
	qw422016.N().S(`
`)
//line queries.qtpl:47
	qw422016.N().S(q.SQL)
//line queries.qtpl:47
	qw422016.N().S(`
    `)
//line queries.qtpl:47
	qw422016.N().S("`")
//line queries.qtpl:47
	qw422016.N().S(`

    ps := &`)
//line queries.qtpl:50
	qw422016.E().S(q.Name.Pascal)
//line queries.qtpl:50
	qw422016.N().S(`Stmt{
        conn:     tx,
        querySQL: querySQL,
        hasSlices: `)
//line queries.qtpl:53
	if q.HasSliceParams {
//line queries.qtpl:53
		qw422016.N().S(`true`)
//line queries.qtpl:53
	} else {
//line queries.qtpl:53
		qw422016.N().S(`false`)
//line queries.qtpl:53
	}
//line queries.qtpl:53
	qw422016.N().S(`,
    }

    if !ps.hasSlices {
        ps.stmt = tx.Prep(querySQL)
    }

    return ps
}

func (ps *`)
//line queries.qtpl:63
	qw422016.E().S(q.Name.Pascal)
//line queries.qtpl:63
	qw422016.N().S(`Stmt) Run(
    `)
//line queries.qtpl:64
	streamfillReqParams(qw422016, q)
//line queries.qtpl:64
	qw422016.N().S(`) (
    `)
//line queries.qtpl:66
	streamfillReturns(qw422016, q)
//line queries.qtpl:66
	qw422016.N().S(`) {
    querySQL := ps.querySQL

`)
//line queries.qtpl:70
	if q.HasSliceParams {
//line queries.qtpl:70
		qw422016.N().S(`    `)
//line queries.qtpl:71
		streamdeclareSlices(qw422016, q, q.ParamsIsSingularField)
//line queries.qtpl:71
		qw422016.N().S(`
`)
//line queries.qtpl:72
	}
//line queries.qtpl:72
	qw422016.N().S(`
    var stmt *sqlite.Stmt
    if ps.hasSlices {
        stmt = ps.conn.Prep(querySQL)
    } else {
        stmt = ps.stmt
    }

    defer func() {
        _ = stmt.ClearBindings()
        _ = stmt.Reset()
    }()

`)
//line queries.qtpl:86
	if len(q.Params) > 0 {
//line queries.qtpl:86
		qw422016.N().S(`    bindIndex := 1
    // Bind parameters
    `)
//line queries.qtpl:89
		streambindParams(qw422016, q, q.ParamsIsSingularField)
//line queries.qtpl:89
		qw422016.N().S(`
`)
//line queries.qtpl:90
	}
//line queries.qtpl:90
	qw422016.N().S(`
    // Execute the query
`)
//line queries.qtpl:93
	if q.HasResponse {
//line queries.qtpl:94
		if q.ResponseHasMultiple {
//line queries.qtpl:94
			qw422016.N().S(`        for {
            if hasRow, err := stmt.Step(); err != nil {
                return res, fmt.Errorf("failed to execute {{.Name.Lower}} SQL: %w", err)
            } else if !hasRow {
                break
            }

`)
//line queries.qtpl:102
			if q.ResponseIsSingularField {
//line queries.qtpl:102
				qw422016.N().S(`            `)
//line queries.qtpl:103
				streamfillResponse(qw422016, q)
//line queries.qtpl:103
				qw422016.N().S(`            res = append(res, resVal)
`)
//line queries.qtpl:105
			} else {
//line queries.qtpl:106
				if q.ResponseHasModel {
//line queries.qtpl:106
					qw422016.N().S(`            `)
//line queries.qtpl:107
					streamfillResponse(qw422016, q)
//line queries.qtpl:107
					qw422016.N().S(`            res = append(res, row)
`)
//line queries.qtpl:109
				} else {
//line queries.qtpl:109
					qw422016.N().S(`            `)
//line queries.qtpl:110
					streamfillResponse(qw422016, q)
//line queries.qtpl:110
					qw422016.N().S(`            res = append(res, row)
`)
//line queries.qtpl:112
				}
//line queries.qtpl:113
			}
//line queries.qtpl:113
			qw422016.N().S(`        }
`)
//line queries.qtpl:115
		} else {
//line queries.qtpl:115
			qw422016.N().S(`        if hasRow, err := stmt.Step(); err != nil {
`)
//line queries.qtpl:117
			if q.ResponseIsSingularField {
//line queries.qtpl:117
				qw422016.N().S(`            return res, fmt.Errorf("failed to execute {{.Name.Lower}} SQL: %w", err)
`)
//line queries.qtpl:119
			} else {
//line queries.qtpl:120
				if q.ResponseHasModel {
//line queries.qtpl:120
					qw422016.N().S(`            return res, fmt.Errorf("failed to execute {{.Name.Lower}} SQL: %w", err)
`)
//line queries.qtpl:122
				} else {
//line queries.qtpl:122
					qw422016.N().S(`            return res, fmt.Errorf("failed to execute {{.Name.Lower}} SQL: %w", err)
`)
//line queries.qtpl:124
				}
//line queries.qtpl:125
			}
//line queries.qtpl:125
			qw422016.N().S(`        } else if hasRow {
`)
//line queries.qtpl:127
			if q.ResponseIsSingularField {
//line queries.qtpl:127
				qw422016.N().S(`            `)
//line queries.qtpl:128
				streamfillResponse(qw422016, q)
//line queries.qtpl:128
				qw422016.N().S(`            res = resVal
`)
//line queries.qtpl:130
			} else {
//line queries.qtpl:131
				if q.ResponseHasModel {
//line queries.qtpl:131
					qw422016.N().S(`            `)
//line queries.qtpl:132
					streamfillResponse(qw422016, q)
//line queries.qtpl:132
					qw422016.N().S(`            res = row
`)
//line queries.qtpl:134
				} else {
//line queries.qtpl:134
					qw422016.N().S(`            `)
//line queries.qtpl:135
					streamfillResponse(qw422016, q)
//line queries.qtpl:135
					qw422016.N().S(`            res = &row
`)
//line queries.qtpl:137
				}
//line queries.qtpl:138
			}
//line queries.qtpl:138
			qw422016.N().S(`        }
`)
//line queries.qtpl:140
		}
//line queries.qtpl:141
	} else {
//line queries.qtpl:141
		qw422016.N().S(`    if _, err := stmt.Step(); err != nil {
        return fmt.Errorf("failed to execute `)
//line queries.qtpl:143
		qw422016.E().S(q.Name.Lower)
//line queries.qtpl:143
		qw422016.N().S(` SQL: %w", err)
    }
`)
//line queries.qtpl:145
	}
//line queries.qtpl:145
	qw422016.N().S(`
`)
//line queries.qtpl:147
	if q.HasResponse {
//line queries.qtpl:147
		qw422016.N().S(`    return res, nil
`)
//line queries.qtpl:149
	} else {
//line queries.qtpl:149
		qw422016.N().S(`    return nil
`)
//line queries.qtpl:151
	}
//line queries.qtpl:151
	qw422016.N().S(`}

func Once`)
//line queries.qtpl:154
	qw422016.E().S(q.Name.Pascal)
//line queries.qtpl:154
	qw422016.N().S(`(
    tx *sqlite.Conn,
    `)
//line queries.qtpl:156
	streamfillReqParams(qw422016, q)
//line queries.qtpl:156
	qw422016.N().S(`) (
    `)
//line queries.qtpl:158
	streamfillReturns(qw422016, q)
//line queries.qtpl:158
	qw422016.N().S(`) {
    ps := `)
//line queries.qtpl:160
	qw422016.E().S(q.Name.Pascal)
//line queries.qtpl:160
	qw422016.N().S(`(tx)

    return ps.Run(
`)
//line queries.qtpl:163
	if q.HasParams {
//line queries.qtpl:163
		qw422016.N().S(`        `)
//line queries.qtpl:164
		if q.ParamsIsSingularField {
//line queries.qtpl:164
			qw422016.N().S(`            `)
//line queries.qtpl:165
			qw422016.E().S(q.Params[0].Name.Camel)
//line queries.qtpl:165
			qw422016.N().S(`,
`)
//line queries.qtpl:166
		} else {
//line queries.qtpl:166
			qw422016.N().S(`            params,
`)
//line queries.qtpl:168
		}
//line queries.qtpl:169
	}
//line queries.qtpl:169
	qw422016.N().S(`
    )
}

`)
//line queries.qtpl:173
}

//line queries.qtpl:173
func WriteGenerateQuery(qq422016 qtio422016.Writer, q *GenerateQueryContext) {
//line queries.qtpl:173
	qw422016 := qt422016.AcquireWriter(qq422016)
//line queries.qtpl:173
	StreamGenerateQuery(qw422016, q)
//line queries.qtpl:173
	qt422016.ReleaseWriter(qw422016)
//line queries.qtpl:173
}

//line queries.qtpl:173
func GenerateQuery(q *GenerateQueryContext) string {
//line queries.qtpl:173
	qb422016 := qt422016.AcquireByteBuffer()
//line queries.qtpl:173
	WriteGenerateQuery(qb422016, q)
//line queries.qtpl:173
	qs422016 := string(qb422016.B)
//line queries.qtpl:173
	qt422016.ReleaseByteBuffer(qb422016)
//line queries.qtpl:173
	return qs422016
//line queries.qtpl:173
}

//line queries.qtpl:175
func streamfillResponse(qw422016 *qt422016.Writer, q *GenerateQueryContext) {
//line queries.qtpl:176
	if q.ResponseIsSingularField {
//line queries.qtpl:178
		f := q.ResponseFields[0]

//line queries.qtpl:180
		if f.GoType.Original == "time.Duration" && f.DurationFromText {
//line queries.qtpl:180
			qw422016.N().S(`    durStr := stmt.ColumnText(`)
//line queries.qtpl:181
			qw422016.N().D(f.Offset)
//line queries.qtpl:181
			qw422016.N().S(`)
    val, err := time.ParseDuration(durStr)
    if err != nil {
        return res, fmt.Errorf("parsing {{.Name.Lower}}.`)
//line queries.qtpl:184
			qw422016.E().S(f.Name.Lower)
//line queries.qtpl:184
			qw422016.N().S(`: %w", err)
    }
    resVal := val
`)
//line queries.qtpl:187
		} else {
//line queries.qtpl:187
			qw422016.N().S(`    resVal := `)
//line queries.qtpl:188
			streamfillResponseField(qw422016, f)
//line queries.qtpl:188
			qw422016.N().S(`
`)
//line queries.qtpl:189
		}
//line queries.qtpl:190
	} else {
//line queries.qtpl:191
		if q.ResponseHasModel {
//line queries.qtpl:191
			qw422016.N().S(`    row := &`)
//line queries.qtpl:192
			qw422016.E().S(q.ResponseModelName.Pascal)
//line queries.qtpl:192
			qw422016.N().S(`Model{}
`)
//line queries.qtpl:193
			for _, f := range q.ResponseFields {
//line queries.qtpl:194
				if f.GoType.Original == "time.Duration" && f.DurationFromText {
//line queries.qtpl:194
					qw422016.N().S(`    {
        durStr := stmt.ColumnText(`)
//line queries.qtpl:196
					qw422016.N().D(f.Offset)
//line queries.qtpl:196
					qw422016.N().S(`)
        dur, err := time.ParseDuration(durStr)
        if err != nil {
            return res, fmt.Errorf("parsing {{.Name.Lower}}.`)
//line queries.qtpl:199
					qw422016.E().S(f.Name.Lower)
//line queries.qtpl:199
					qw422016.N().S(`: %w", err)
        }
`)
//line queries.qtpl:201
					if f.IsNullable {
//line queries.qtpl:201
						qw422016.N().S(`
        row.`)
//line queries.qtpl:202
						qw422016.E().S(f.Name.Pascal)
//line queries.qtpl:202
						qw422016.N().S(` = &dur
`)
//line queries.qtpl:203
					} else {
//line queries.qtpl:203
						qw422016.N().S(`
        row.`)
//line queries.qtpl:204
						qw422016.E().S(f.Name.Pascal)
//line queries.qtpl:204
						qw422016.N().S(` = dur
`)
//line queries.qtpl:205
					}
//line queries.qtpl:205
					qw422016.N().S(`
    }
`)
//line queries.qtpl:207
				} else {
//line queries.qtpl:208
					if f.IsNullable {
//line queries.qtpl:208
						qw422016.N().S(`    if stmt.ColumnIsNull(`)
//line queries.qtpl:209
						qw422016.N().D(f.Offset)
//line queries.qtpl:209
						qw422016.N().S(`) {
        row.`)
//line queries.qtpl:210
						qw422016.E().S(f.Name.Pascal)
//line queries.qtpl:210
						qw422016.N().S(` = nil
    } else {
        tmp := `)
//line queries.qtpl:212
						streamfillResponseField(qw422016, f)
//line queries.qtpl:212
						qw422016.N().S(`        row.`)
//line queries.qtpl:213
						qw422016.E().S(f.Name.Pascal)
//line queries.qtpl:213
						qw422016.N().S(` = &tmp
    }
`)
//line queries.qtpl:215
					} else {
//line queries.qtpl:215
						qw422016.N().S(`    row.`)
//line queries.qtpl:216
						qw422016.E().S(f.Name.Pascal)
//line queries.qtpl:216
						qw422016.N().S(` = `)
//line queries.qtpl:216
						streamfillResponseField(qw422016, f)
//line queries.qtpl:217
					}
//line queries.qtpl:218
				}
//line queries.qtpl:219
			}
//line queries.qtpl:220
		} else {
//line queries.qtpl:220
			qw422016.N().S(`    row := `)
//line queries.qtpl:221
			qw422016.E().S(q.Name.Pascal)
//line queries.qtpl:221
			qw422016.N().S(`Res{}
`)
//line queries.qtpl:222
			for _, f := range q.ResponseFields {
//line queries.qtpl:223
				if f.GoType.Original == "time.Duration" && f.DurationFromText {
//line queries.qtpl:223
					qw422016.N().S(`    {
        durStr := stmt.ColumnText(`)
//line queries.qtpl:225
					qw422016.N().D(f.Offset)
//line queries.qtpl:225
					qw422016.N().S(`)
        dur, err := time.ParseDuration(durStr)
        if err != nil {
            return res, fmt.Errorf("parsing {{.Name.Lower}}.`)
//line queries.qtpl:228
					qw422016.E().S(f.Name.Lower)
//line queries.qtpl:228
					qw422016.N().S(`: %w", err)
        }
`)
//line queries.qtpl:230
					if f.IsNullable {
//line queries.qtpl:230
						qw422016.N().S(`
        row.`)
//line queries.qtpl:231
						qw422016.E().S(f.Name.Pascal)
//line queries.qtpl:231
						qw422016.N().S(` = &dur
`)
//line queries.qtpl:232
					} else {
//line queries.qtpl:232
						qw422016.N().S(`
        row.`)
//line queries.qtpl:233
						qw422016.E().S(f.Name.Pascal)
//line queries.qtpl:233
						qw422016.N().S(` = dur
`)
//line queries.qtpl:234
					}
//line queries.qtpl:234
					qw422016.N().S(`
    }
`)
//line queries.qtpl:236
				} else {
//line queries.qtpl:237
					if f.IsNullable {
//line queries.qtpl:237
						qw422016.N().S(`            isNull`)
//line queries.qtpl:238
						qw422016.E().S(f.Name.Pascal)
//line queries.qtpl:238
						qw422016.N().S(` := stmt.ColumnIsNull(`)
//line queries.qtpl:238
						qw422016.N().D(f.Offset)
//line queries.qtpl:238
						qw422016.N().S(`)
            if !isNull`)
//line queries.qtpl:239
						qw422016.E().S(f.Name.Pascal)
//line queries.qtpl:239
						qw422016.N().S(` {
                tmp := `)
//line queries.qtpl:240
						streamfillResponseField(qw422016, f)
//line queries.qtpl:240
						qw422016.N().S(`                row.`)
//line queries.qtpl:241
						qw422016.E().S(f.Name.Pascal)
//line queries.qtpl:241
						qw422016.N().S(` = &tmp
            }
`)
//line queries.qtpl:243
					} else {
//line queries.qtpl:243
						qw422016.N().S(`            row.`)
//line queries.qtpl:244
						qw422016.E().S(f.Name.Pascal)
//line queries.qtpl:244
						qw422016.N().S(` = `)
//line queries.qtpl:244
						streamfillResponseField(qw422016, f)
//line queries.qtpl:245
					}
//line queries.qtpl:246
				}
//line queries.qtpl:247
			}
//line queries.qtpl:248
		}
//line queries.qtpl:249
	}
//line queries.qtpl:250
}

//line queries.qtpl:250
func writefillResponse(qq422016 qtio422016.Writer, q *GenerateQueryContext) {
//line queries.qtpl:250
	qw422016 := qt422016.AcquireWriter(qq422016)
//line queries.qtpl:250
	streamfillResponse(qw422016, q)
//line queries.qtpl:250
	qt422016.ReleaseWriter(qw422016)
//line queries.qtpl:250
}

//line queries.qtpl:250
func fillResponse(q *GenerateQueryContext) string {
//line queries.qtpl:250
	qb422016 := qt422016.AcquireByteBuffer()
//line queries.qtpl:250
	writefillResponse(qb422016, q)
//line queries.qtpl:250
	qs422016 := string(qb422016.B)
//line queries.qtpl:250
	qt422016.ReleaseByteBuffer(qb422016)
//line queries.qtpl:250
	return qs422016
//line queries.qtpl:250
}

//line queries.qtpl:252
func streamfillResponseField(qw422016 *qt422016.Writer, f GenerateField) {
//line queries.qtpl:253
	switch f.GoType.Original {
//line queries.qtpl:254
	case "time.Time":
//line queries.qtpl:254
		qw422016.N().S(`        toolbelt.JulianDayToTime(stmt.ColumnFloat(`)
//line queries.qtpl:255
		qw422016.N().D(f.Offset)
//line queries.qtpl:255
		qw422016.N().S(`))
`)
//line queries.qtpl:256
	case "time.Duration":
//line queries.qtpl:256
		qw422016.N().S(`        toolbelt.MillisecondsToDuration(stmt.ColumnInt64(`)
//line queries.qtpl:257
		qw422016.N().D(f.Offset)
//line queries.qtpl:257
		qw422016.N().S(`))
`)
//line queries.qtpl:258
	case "[]byte":
//line queries.qtpl:258
		qw422016.N().S(`        toolbelt.StmtBytesByCol(stmt, `)
//line queries.qtpl:259
		qw422016.N().D(f.Offset)
//line queries.qtpl:259
		qw422016.N().S(`)
`)
//line queries.qtpl:260
	default:
//line queries.qtpl:260
		qw422016.N().S(`        stmt.Column`)
//line queries.qtpl:261
		qw422016.E().S(f.SQLType.Pascal)
//line queries.qtpl:261
		qw422016.N().S(`(`)
//line queries.qtpl:261
		qw422016.N().D(f.Offset)
//line queries.qtpl:261
		qw422016.N().S(`)
`)
//line queries.qtpl:262
	}
//line queries.qtpl:263
}

//line queries.qtpl:263
func writefillResponseField(qq422016 qtio422016.Writer, f GenerateField) {
//line queries.qtpl:263
	qw422016 := qt422016.AcquireWriter(qq422016)
//line queries.qtpl:263
	streamfillResponseField(qw422016, f)
//line queries.qtpl:263
	qt422016.ReleaseWriter(qw422016)
//line queries.qtpl:263
}

//line queries.qtpl:263
func fillResponseField(f GenerateField) string {
//line queries.qtpl:263
	qb422016 := qt422016.AcquireByteBuffer()
//line queries.qtpl:263
	writefillResponseField(qb422016, f)
//line queries.qtpl:263
	qs422016 := string(qb422016.B)
//line queries.qtpl:263
	qt422016.ReleaseByteBuffer(qb422016)
//line queries.qtpl:263
	return qs422016
//line queries.qtpl:263
}

//line queries.qtpl:265
func streamfillReqParams(qw422016 *qt422016.Writer, q *GenerateQueryContext) {
//line queries.qtpl:266
	if q.HasParams {
//line queries.qtpl:267
		if q.ParamsIsSingularField {
//line queries.qtpl:267
			qw422016.N().S(`        `)
//line queries.qtpl:268
			qw422016.E().S(q.Params[0].Name.Camel)
//line queries.qtpl:268
			qw422016.N().S(`  `)
//line queries.qtpl:268
			if q.Params[0].IsNullable {
//line queries.qtpl:268
				qw422016.N().S(`*`)
//line queries.qtpl:268
			}
//line queries.qtpl:268
			qw422016.E().S(q.Params[0].GoType.Original)
//line queries.qtpl:268
			qw422016.N().S(`,
`)
//line queries.qtpl:269
		} else {
//line queries.qtpl:269
			qw422016.N().S(`        params `)
//line queries.qtpl:270
			qw422016.E().S(q.Name.Pascal)
//line queries.qtpl:270
			qw422016.N().S(`Params,
`)
//line queries.qtpl:271
		}
//line queries.qtpl:272
	}
//line queries.qtpl:273
}

//line queries.qtpl:273
func writefillReqParams(qq422016 qtio422016.Writer, q *GenerateQueryContext) {
//line queries.qtpl:273
	qw422016 := qt422016.AcquireWriter(qq422016)
//line queries.qtpl:273
	streamfillReqParams(qw422016, q)
//line queries.qtpl:273
	qt422016.ReleaseWriter(qw422016)
//line queries.qtpl:273
}

//line queries.qtpl:273
func fillReqParams(q *GenerateQueryContext) string {
//line queries.qtpl:273
	qb422016 := qt422016.AcquireByteBuffer()
//line queries.qtpl:273
	writefillReqParams(qb422016, q)
//line queries.qtpl:273
	qs422016 := string(qb422016.B)
//line queries.qtpl:273
	qt422016.ReleaseByteBuffer(qb422016)
//line queries.qtpl:273
	return qs422016
//line queries.qtpl:273
}

//line queries.qtpl:276
func streamfillReturns(qw422016 *qt422016.Writer, q *GenerateQueryContext) {
//line queries.qtpl:277
	if q.HasResponse {
//line queries.qtpl:278
		if q.ResponseIsSingularField {
//line queries.qtpl:278
			qw422016.N().S(`        res `)
//line queries.qtpl:279
			if q.ResponseHasMultiple {
//line queries.qtpl:279
				qw422016.N().S(`[]`)
//line queries.qtpl:279
			}
//line queries.qtpl:279
			qw422016.E().S(q.ResponseFields[0].GoType.Original)
//line queries.qtpl:279
			qw422016.N().S(`,
`)
//line queries.qtpl:280
		} else {
//line queries.qtpl:281
			if q.ResponseHasModel {
//line queries.qtpl:281
				qw422016.N().S(`        res `)
//line queries.qtpl:282
				if q.ResponseHasMultiple {
//line queries.qtpl:282
					qw422016.N().S(`[]`)
//line queries.qtpl:282
				}
//line queries.qtpl:282
				qw422016.N().S(`*`)
//line queries.qtpl:282
				qw422016.E().S(q.ResponseModelName.Pascal)
//line queries.qtpl:282
				qw422016.N().S(`Model,
`)
//line queries.qtpl:283
			} else {
//line queries.qtpl:283
				qw422016.N().S(`        res `)
//line queries.qtpl:284
				if q.ResponseHasMultiple {
//line queries.qtpl:284
					qw422016.N().S(`[]`)
//line queries.qtpl:284
				} else {
//line queries.qtpl:284
					qw422016.N().S(`*`)
//line queries.qtpl:284
				}
//line queries.qtpl:284
				qw422016.E().S(q.Name.Pascal)
//line queries.qtpl:284
				qw422016.N().S(`Res,
`)
//line queries.qtpl:285
			}
//line queries.qtpl:286
		}
//line queries.qtpl:287
	}
//line queries.qtpl:287
	qw422016.N().S(`    err error,
`)
//line queries.qtpl:289
}

//line queries.qtpl:289
func writefillReturns(qq422016 qtio422016.Writer, q *GenerateQueryContext) {
//line queries.qtpl:289
	qw422016 := qt422016.AcquireWriter(qq422016)
//line queries.qtpl:289
	streamfillReturns(qw422016, q)
//line queries.qtpl:289
	qt422016.ReleaseWriter(qw422016)
//line queries.qtpl:289
}

//line queries.qtpl:289
func fillReturns(q *GenerateQueryContext) string {
//line queries.qtpl:289
	qb422016 := qt422016.AcquireByteBuffer()
//line queries.qtpl:289
	writefillReturns(qb422016, q)
//line queries.qtpl:289
	qs422016 := string(qb422016.B)
//line queries.qtpl:289
	qt422016.ReleaseByteBuffer(qb422016)
//line queries.qtpl:289
	return qs422016
//line queries.qtpl:289
}

//line queries.qtpl:291
func streamdeclareSlices(qw422016 *qt422016.Writer, q *GenerateQueryContext, isSingle bool) {
//line queries.qtpl:292
	for _, p := range q.Params {
//line queries.qtpl:293
		if p.IsSlice {
//line queries.qtpl:295
			accessor := p.Name.Camel
			if !isSingle {
				accessor = "params." + p.Name.Pascal
			}
			sliceVar := "slice" + p.Name.Pascal

//line queries.qtpl:300
			qw422016.N().S(`    `)
//line queries.qtpl:301
			qw422016.E().S(sliceVar)
//line queries.qtpl:301
			qw422016.N().S(` := `)
//line queries.qtpl:301
			qw422016.E().S(accessor)
//line queries.qtpl:301
			qw422016.N().S(`
    if len(`)
//line queries.qtpl:302
			qw422016.E().S(sliceVar)
//line queries.qtpl:302
			qw422016.N().S(`) > 0 {
        querySQL = strings.Replace(querySQL, "/*SLICE:`)
//line queries.qtpl:303
			qw422016.E().S(p.OriginalName)
//line queries.qtpl:303
			qw422016.N().S(`*/?", strings.Repeat(",?", len(`)
//line queries.qtpl:303
			qw422016.E().S(sliceVar)
//line queries.qtpl:303
			qw422016.N().S(`))[1:], 1)
    } else {
        querySQL = strings.Replace(querySQL, "/*SLICE:`)
//line queries.qtpl:305
			qw422016.E().S(p.OriginalName)
//line queries.qtpl:305
			qw422016.N().S(`*/?", "NULL", 1)
    }
`)
//line queries.qtpl:307
		}
//line queries.qtpl:308
	}
//line queries.qtpl:309
}

//line queries.qtpl:309
func writedeclareSlices(qq422016 qtio422016.Writer, q *GenerateQueryContext, isSingle bool) {
//line queries.qtpl:309
	qw422016 := qt422016.AcquireWriter(qq422016)
//line queries.qtpl:309
	streamdeclareSlices(qw422016, q, isSingle)
//line queries.qtpl:309
	qt422016.ReleaseWriter(qw422016)
//line queries.qtpl:309
}

//line queries.qtpl:309
func declareSlices(q *GenerateQueryContext, isSingle bool) string {
//line queries.qtpl:309
	qb422016 := qt422016.AcquireByteBuffer()
//line queries.qtpl:309
	writedeclareSlices(qb422016, q, isSingle)
//line queries.qtpl:309
	qs422016 := string(qb422016.B)
//line queries.qtpl:309
	qt422016.ReleaseByteBuffer(qb422016)
//line queries.qtpl:309
	return qs422016
//line queries.qtpl:309
}

//line queries.qtpl:311
func streambindParams(qw422016 *qt422016.Writer, q *GenerateQueryContext, isSingle bool) {
//line queries.qtpl:312
	for _, p := range q.Params {
//line queries.qtpl:313
		if p.IsSlice {
//line queries.qtpl:315
			sliceVar := "slice" + p.Name.Pascal

//line queries.qtpl:316
			qw422016.N().S(`    if len(`)
//line queries.qtpl:317
			qw422016.E().S(sliceVar)
//line queries.qtpl:317
			qw422016.N().S(`) > 0 {
        for _, elem := range `)
//line queries.qtpl:318
			qw422016.E().S(sliceVar)
//line queries.qtpl:318
			qw422016.N().S(` {
            `)
//line queries.qtpl:319
			streambindValueWithExpr(qw422016, p, "elem")
//line queries.qtpl:319
			qw422016.N().S(`
            bindIndex++
        }
    }
`)
//line queries.qtpl:323
		} else {
//line queries.qtpl:325
			accessor := p.Name.Camel
			if !isSingle {
				accessor = "params." + p.Name.Pascal
			}

//line queries.qtpl:330
			if p.IsNullable {
//line queries.qtpl:330
				qw422016.N().S(`    if `)
//line queries.qtpl:331
				qw422016.E().S(accessor)
//line queries.qtpl:331
				qw422016.N().S(` == nil {
        stmt.BindNull(bindIndex)
    } else {
        `)
//line queries.qtpl:334
				streambindValueWithExpr(qw422016, p, "*"+accessor)
//line queries.qtpl:334
				qw422016.N().S(`
    }
    bindIndex++
`)
//line queries.qtpl:337
			} else {
//line queries.qtpl:337
				qw422016.N().S(`    `)
//line queries.qtpl:338
				streambindValueWithExpr(qw422016, p, accessor)
//line queries.qtpl:338
				qw422016.N().S(`
    bindIndex++
`)
//line queries.qtpl:340
			}
//line queries.qtpl:341
		}
//line queries.qtpl:342
	}
//line queries.qtpl:343
}

//line queries.qtpl:343
func writebindParams(qq422016 qtio422016.Writer, q *GenerateQueryContext, isSingle bool) {
//line queries.qtpl:343
	qw422016 := qt422016.AcquireWriter(qq422016)
//line queries.qtpl:343
	streambindParams(qw422016, q, isSingle)
//line queries.qtpl:343
	qt422016.ReleaseWriter(qw422016)
//line queries.qtpl:343
}

//line queries.qtpl:343
func bindParams(q *GenerateQueryContext, isSingle bool) string {
//line queries.qtpl:343
	qb422016 := qt422016.AcquireByteBuffer()
//line queries.qtpl:343
	writebindParams(qb422016, q, isSingle)
//line queries.qtpl:343
	qs422016 := string(qb422016.B)
//line queries.qtpl:343
	qt422016.ReleaseByteBuffer(qb422016)
//line queries.qtpl:343
	return qs422016
//line queries.qtpl:343
}

//line queries.qtpl:345
func streambindValueWithExpr(qw422016 *qt422016.Writer, p GenerateField, value string) {
//line queries.qtpl:346
	switch p.BindGoType.Original {
//line queries.qtpl:347
	case "time.Time":
//line queries.qtpl:347
		qw422016.N().S(`        stmt.Bind`)
//line queries.qtpl:348
		qw422016.E().S(p.SQLType.Pascal)
//line queries.qtpl:348
		qw422016.N().S(`(bindIndex, toolbelt.TimeToJulianDay(`)
//line queries.qtpl:348
		qw422016.E().S(value)
//line queries.qtpl:348
		qw422016.N().S(`))
`)
//line queries.qtpl:349
	case "time.Duration":
//line queries.qtpl:350
		if p.DurationFromText {
//line queries.qtpl:350
			qw422016.N().S(`        stmt.BindText(bindIndex, `)
//line queries.qtpl:351
			qw422016.E().S(value)
//line queries.qtpl:351
			qw422016.N().S(`.String())
`)
//line queries.qtpl:352
		} else {
//line queries.qtpl:352
			qw422016.N().S(`        stmt.Bind`)
//line queries.qtpl:353
			qw422016.E().S(p.SQLType.Pascal)
//line queries.qtpl:353
			qw422016.N().S(`(bindIndex, toolbelt.DurationToMilliseconds(`)
//line queries.qtpl:353
			qw422016.E().S(value)
//line queries.qtpl:353
			qw422016.N().S(`))
`)
//line queries.qtpl:354
		}
//line queries.qtpl:355
	default:
//line queries.qtpl:355
		qw422016.N().S(`        stmt.Bind`)
//line queries.qtpl:356
		qw422016.E().S(p.SQLType.Pascal)
//line queries.qtpl:356
		qw422016.N().S(`(bindIndex, `)
//line queries.qtpl:356
		qw422016.E().S(value)
//line queries.qtpl:356
		qw422016.N().S(`)
`)
//line queries.qtpl:357
	}
//line queries.qtpl:358
}

//line queries.qtpl:358
func writebindValueWithExpr(qq422016 qtio422016.Writer, p GenerateField, value string) {
//line queries.qtpl:358
	qw422016 := qt422016.AcquireWriter(qq422016)
//line queries.qtpl:358
	streambindValueWithExpr(qw422016, p, value)
//line queries.qtpl:358
	qt422016.ReleaseWriter(qw422016)
//line queries.qtpl:358
}

//line queries.qtpl:358
func bindValueWithExpr(p GenerateField, value string) string {
//line queries.qtpl:358
	qb422016 := qt422016.AcquireByteBuffer()
//line queries.qtpl:358
	writebindValueWithExpr(qb422016, p, value)
//line queries.qtpl:358
	qs422016 := string(qb422016.B)
//line queries.qtpl:358
	qt422016.ReleaseByteBuffer(qb422016)
//line queries.qtpl:358
	return qs422016
//line queries.qtpl:358
}
